"use strict";var Dn=Object.create;var he=Object.defineProperty;var Pn=Object.getOwnPropertyDescriptor;var Nn=Object.getOwnPropertyNames;var Tn=Object.getPrototypeOf,Cn=Object.prototype.hasOwnProperty;var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),In=(e,t)=>{for(var r in t)he(e,r,{get:t[r],enumerable:!0})},rt=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Nn(t))!Cn.call(e,i)&&i!==r&&he(e,i,{get:()=>t[i],enumerable:!(n=Pn(t,i))||n.enumerable});return e};var ie=(e,t,r)=>(r=e!=null?Dn(Tn(e)):{},rt(t||!e||!e.__esModule?he(r,"default",{value:e,enumerable:!0}):r,e)),_n=e=>rt(he({},"__esModule",{value:!0}),e);var M=S(Le=>{"use strict";Le.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,o)=>i!=null?n(i):r(o)),e.apply(this,t)})},"name",{value:e.name})};Le.fromPromise=function(e){return Object.defineProperty(function(...t){let r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}});var it=S((tu,nt)=>{var Y=require("constants"),Ln=process.cwd,Se=null,$n=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Se||(Se=Ln.call(process)),Se};try{process.cwd()}catch{}typeof process.chdir=="function"&&($e=process.chdir,process.chdir=function(e){Se=null,$e.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,$e));var $e;nt.exports=jn;function jn(e){Y.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&t(e),e.lutimes||r(e),e.chown=o(e.chown),e.fchown=o(e.fchown),e.lchown=o(e.lchown),e.chmod=n(e.chmod),e.fchmod=n(e.fchmod),e.lchmod=n(e.lchmod),e.chownSync=u(e.chownSync),e.fchownSync=u(e.fchownSync),e.lchownSync=u(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=c(e.stat),e.fstat=c(e.fstat),e.lstat=c(e.lstat),e.statSync=f(e.statSync),e.fstatSync=f(e.fstatSync),e.lstatSync=f(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(s,l,m){m&&process.nextTick(m)},e.lchmodSync=function(){}),e.chown&&!e.lchown&&(e.lchown=function(s,l,m,a){a&&process.nextTick(a)},e.lchownSync=function(){}),$n==="win32"&&(e.rename=typeof e.rename!="function"?e.rename:function(s){function l(m,a,d){var q=Date.now(),E=0;s(m,a,function x(W){if(W&&(W.code==="EACCES"||W.code==="EPERM"||W.code==="EBUSY")&&Date.now()-q<6e4){setTimeout(function(){e.stat(a,function($,ne){$&&$.code==="ENOENT"?s(m,a,x):d(W)})},E),E<100&&(E+=10);return}d&&d(W)})}return Object.setPrototypeOf&&Object.setPrototypeOf(l,s),l}(e.rename)),e.read=typeof e.read!="function"?e.read:function(s){function l(m,a,d,q,E,x){var W;if(x&&typeof x=="function"){var $=0;W=function(ne,et,tt){if(ne&&ne.code==="EAGAIN"&&$<10)return $++,s.call(e,m,a,d,q,E,W);x.apply(this,arguments)}}return s.call(e,m,a,d,q,E,W)}return Object.setPrototypeOf&&Object.setPrototypeOf(l,s),l}(e.read),e.readSync=typeof e.readSync!="function"?e.readSync:function(s){return function(l,m,a,d,q){for(var E=0;;)try{return s.call(e,l,m,a,d,q)}catch(x){if(x.code==="EAGAIN"&&E<10){E++;continue}throw x}}}(e.readSync);function t(s){s.lchmod=function(l,m,a){s.open(l,Y.O_WRONLY|Y.O_SYMLINK,m,function(d,q){if(d){a&&a(d);return}s.fchmod(q,m,function(E){s.close(q,function(x){a&&a(E||x)})})})},s.lchmodSync=function(l,m){var a=s.openSync(l,Y.O_WRONLY|Y.O_SYMLINK,m),d=!0,q;try{q=s.fchmodSync(a,m),d=!1}finally{if(d)try{s.closeSync(a)}catch{}else s.closeSync(a)}return q}}function r(s){Y.hasOwnProperty("O_SYMLINK")&&s.futimes?(s.lutimes=function(l,m,a,d){s.open(l,Y.O_SYMLINK,function(q,E){if(q){d&&d(q);return}s.futimes(E,m,a,function(x){s.close(E,function(W){d&&d(x||W)})})})},s.lutimesSync=function(l,m,a){var d=s.openSync(l,Y.O_SYMLINK),q,E=!0;try{q=s.futimesSync(d,m,a),E=!1}finally{if(E)try{s.closeSync(d)}catch{}else s.closeSync(d)}return q}):s.futimes&&(s.lutimes=function(l,m,a,d){d&&process.nextTick(d)},s.lutimesSync=function(){})}function n(s){return s&&function(l,m,a){return s.call(e,l,m,function(d){h(d)&&(d=null),a&&a.apply(this,arguments)})}}function i(s){return s&&function(l,m){try{return s.call(e,l,m)}catch(a){if(!h(a))throw a}}}function o(s){return s&&function(l,m,a,d){return s.call(e,l,m,a,function(q){h(q)&&(q=null),d&&d.apply(this,arguments)})}}function u(s){return s&&function(l,m,a){try{return s.call(e,l,m,a)}catch(d){if(!h(d))throw d}}}function c(s){return s&&function(l,m,a){typeof m=="function"&&(a=m,m=null);function d(q,E){E&&(E.uid<0&&(E.uid+=4294967296),E.gid<0&&(E.gid+=4294967296)),a&&a.apply(this,arguments)}return m?s.call(e,l,m,d):s.call(e,l,d)}}function f(s){return s&&function(l,m){var a=m?s.call(e,l,m):s.call(e,l);return a&&(a.uid<0&&(a.uid+=4294967296),a.gid<0&&(a.gid+=4294967296)),a}}function h(s){if(!s||s.code==="ENOSYS")return!0;var l=!process.getuid||process.getuid()!==0;return!!(l&&(s.code==="EINVAL"||s.code==="EPERM"))}}});var ct=S((ru,ut)=>{var ot=require("stream").Stream;ut.exports=Rn;function Rn(e){return{ReadStream:t,WriteStream:r};function t(n,i){if(!(this instanceof t))return new t(n,i);ot.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var u=Object.keys(i),c=0,f=u.length;c<f;c++){var h=u[c];this[h]=i[h]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){o._read()});return}e.open(this.path,this.flags,this.mode,function(s,l){if(s){o.emit("error",s),o.readable=!1;return}o.fd=l,o.emit("open",l),o._read()})}function r(n,i){if(!(this instanceof r))return new r(n,i);ot.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var o=Object.keys(i),u=0,c=o.length;u<c;u++){var f=o[u];this[f]=i[f]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}});var ft=S((nu,st)=>{"use strict";st.exports=Mn;var Wn=Object.getPrototypeOf||function(e){return e.__proto__};function Mn(e){if(e===null||typeof e!="object")return e;if(e instanceof Object)var t={__proto__:Wn(e)};else var t=Object.create(null);return Object.getOwnPropertyNames(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}});var j=S((iu,We)=>{var O=require("fs"),An=it(),Jn=ct(),Bn=ft(),pe=require("util"),_,Ee;typeof Symbol=="function"&&typeof Symbol.for=="function"?(_=Symbol.for("graceful-fs.queue"),Ee=Symbol.for("graceful-fs.previous")):(_="___graceful-fs.queue",Ee="___graceful-fs.previous");function Un(){}function yt(e,t){Object.defineProperty(e,_,{get:function(){return t}})}var H=Un;pe.debuglog?H=pe.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(H=function(){var e=pe.format.apply(pe,arguments);e="GFS4: "+e.split(/\n/).join(`
GFS4: `),console.error(e)});O[_]||(at=global[_]||[],yt(O,at),O.close=function(e){function t(r,n){return e.call(O,r,function(i){i||lt(),typeof n=="function"&&n.apply(this,arguments)})}return Object.defineProperty(t,Ee,{value:e}),t}(O.close),O.closeSync=function(e){function t(r){e.apply(O,arguments),lt()}return Object.defineProperty(t,Ee,{value:e}),t}(O.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){H(O[_]),require("assert").equal(O[_].length,0)}));var at;global[_]||yt(global,O[_]);We.exports=je(Bn(O));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!O.__patched&&(We.exports=je(O),O.__patched=!0);function je(e){An(e),e.gracefulify=je,e.createReadStream=et,e.createWriteStream=tt;var t=e.readFile;e.readFile=r;function r(y,w,p){return typeof w=="function"&&(p=w,w=null),T(y,w,p);function T(C,P,F,D){return t(C,P,function(k){k&&(k.code==="EMFILE"||k.code==="ENFILE")?Z([T,[C,P,F],k,D||Date.now(),Date.now()]):typeof F=="function"&&F.apply(this,arguments)})}}var n=e.writeFile;e.writeFile=i;function i(y,w,p,T){return typeof p=="function"&&(T=p,p=null),C(y,w,p,T);function C(P,F,D,k,I){return n(P,F,D,function(g){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Z([C,[P,F,D,k],g,I||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var o=e.appendFile;o&&(e.appendFile=u);function u(y,w,p,T){return typeof p=="function"&&(T=p,p=null),C(y,w,p,T);function C(P,F,D,k,I){return o(P,F,D,function(g){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Z([C,[P,F,D,k],g,I||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var c=e.copyFile;c&&(e.copyFile=f);function f(y,w,p,T){return typeof p=="function"&&(T=p,p=0),C(y,w,p,T);function C(P,F,D,k,I){return c(P,F,D,function(g){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Z([C,[P,F,D,k],g,I||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var h=e.readdir;e.readdir=l;var s=/^v[0-5]\./;function l(y,w,p){typeof w=="function"&&(p=w,w=null);var T=s.test(process.version)?function(F,D,k,I){return h(F,C(F,D,k,I))}:function(F,D,k,I){return h(F,D,C(F,D,k,I))};return T(y,w,p);function C(P,F,D,k){return function(I,g){I&&(I.code==="EMFILE"||I.code==="ENFILE")?Z([T,[P,F,D],I,k||Date.now(),Date.now()]):(g&&g.sort&&g.sort(),typeof D=="function"&&D.call(this,I,g))}}}if(process.version.substr(0,4)==="v0.8"){var m=Jn(e);x=m.ReadStream,$=m.WriteStream}var a=e.ReadStream;a&&(x.prototype=Object.create(a.prototype),x.prototype.open=W);var d=e.WriteStream;d&&($.prototype=Object.create(d.prototype),$.prototype.open=ne),Object.defineProperty(e,"ReadStream",{get:function(){return x},set:function(y){x=y},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return $},set:function(y){$=y},enumerable:!0,configurable:!0});var q=x;Object.defineProperty(e,"FileReadStream",{get:function(){return q},set:function(y){q=y},enumerable:!0,configurable:!0});var E=$;Object.defineProperty(e,"FileWriteStream",{get:function(){return E},set:function(y){E=y},enumerable:!0,configurable:!0});function x(y,w){return this instanceof x?(a.apply(this,arguments),this):x.apply(Object.create(x.prototype),arguments)}function W(){var y=this;_e(y.path,y.flags,y.mode,function(w,p){w?(y.autoClose&&y.destroy(),y.emit("error",w)):(y.fd=p,y.emit("open",p),y.read())})}function $(y,w){return this instanceof $?(d.apply(this,arguments),this):$.apply(Object.create($.prototype),arguments)}function ne(){var y=this;_e(y.path,y.flags,y.mode,function(w,p){w?(y.destroy(),y.emit("error",w)):(y.fd=p,y.emit("open",p))})}function et(y,w){return new e.ReadStream(y,w)}function tt(y,w){return new e.WriteStream(y,w)}var On=e.open;e.open=_e;function _e(y,w,p,T){return typeof p=="function"&&(T=p,p=null),C(y,w,p,T);function C(P,F,D,k,I){return On(P,F,D,function(g,zo){g&&(g.code==="EMFILE"||g.code==="ENFILE")?Z([C,[P,F,D,k],g,I||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}return e}function Z(e){H("ENQUEUE",e[0].name,e[1]),O[_].push(e),Re()}var we;function lt(){for(var e=Date.now(),t=0;t<O[_].length;++t)O[_][t].length>2&&(O[_][t][3]=e,O[_][t][4]=e);Re()}function Re(){if(clearTimeout(we),we=void 0,O[_].length!==0){var e=O[_].shift(),t=e[0],r=e[1],n=e[2],i=e[3],o=e[4];if(i===void 0)H("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-i>=6e4){H("TIMEOUT",t.name,r);var u=r.pop();typeof u=="function"&&u.call(null,n)}else{var c=Date.now()-o,f=Math.max(o-i,1),h=Math.min(f*1.2,100);c>=h?(H("RETRY",t.name,r),t.apply(null,r.concat([i]))):O[_].push(e)}we===void 0&&(we=setTimeout(Re,0))}}});var Q=S(G=>{"use strict";var mt=M().fromCallback,A=j(),Yn=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>typeof A[e]=="function");Object.assign(G,A);Yn.forEach(e=>{G[e]=mt(A[e])});G.exists=function(e,t){return typeof t=="function"?A.exists(e,t):new Promise(r=>A.exists(e,r))};G.read=function(e,t,r,n,i,o){return typeof o=="function"?A.read(e,t,r,n,i,o):new Promise((u,c)=>{A.read(e,t,r,n,i,(f,h,s)=>{if(f)return c(f);u({bytesRead:h,buffer:s})})})};G.write=function(e,t,...r){return typeof r[r.length-1]=="function"?A.write(e,t,...r):new Promise((n,i)=>{A.write(e,t,...r,(o,u,c)=>{if(o)return i(o);n({bytesWritten:u,buffer:c})})})};typeof A.writev=="function"&&(G.writev=function(e,t,...r){return typeof r[r.length-1]=="function"?A.writev(e,t,...r):new Promise((n,i)=>{A.writev(e,t,...r,(o,u,c)=>{if(o)return i(o);n({bytesWritten:u,buffers:c})})})});typeof A.realpath.native=="function"?G.realpath.native=mt(A.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var ht=S((uu,dt)=>{"use strict";var Gn=require("path");dt.exports.checkPath=function(t){if(process.platform==="win32"&&/[<>:"|?*]/.test(t.replace(Gn.parse(t).root,""))){let n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}});var Et=S((cu,Me)=>{"use strict";var St=Q(),{checkPath:pt}=ht(),wt=e=>{let t={mode:511};return typeof e=="number"?e:{...t,...e}.mode};Me.exports.makeDir=async(e,t)=>(pt(e),St.mkdir(e,{mode:wt(t),recursive:!0}));Me.exports.makeDirSync=(e,t)=>(pt(e),St.mkdirSync(e,{mode:wt(t),recursive:!0}))});var B=S((su,vt)=>{"use strict";var bn=M().fromPromise,{makeDir:Kn,makeDirSync:Ae}=Et(),Je=bn(Kn);vt.exports={mkdirs:Je,mkdirsSync:Ae,mkdirp:Je,mkdirpSync:Ae,ensureDir:Je,ensureDirSync:Ae}});var b=S((fu,qt)=>{"use strict";var Vn=M().fromPromise,kt=Q();function Xn(e){return kt.access(e).then(()=>!0).catch(()=>!1)}qt.exports={pathExists:Vn(Xn),pathExistsSync:kt.existsSync}});var Be=S((au,gt)=>{"use strict";var ee=j();function Hn(e,t,r,n){ee.open(e,"r+",(i,o)=>{if(i)return n(i);ee.futimes(o,t,r,u=>{ee.close(o,c=>{n&&n(u||c)})})})}function Qn(e,t,r){let n=ee.openSync(e,"r+");return ee.futimesSync(n,t,r),ee.closeSync(n)}gt.exports={utimesMillis:Hn,utimesMillisSync:Qn}});var z=S((lu,Ot)=>{"use strict";var te=Q(),N=require("path"),zn=require("util");function Zn(e,t,r){let n=r.dereference?i=>te.stat(i,{bigint:!0}):i=>te.lstat(i,{bigint:!0});return Promise.all([n(e),n(t).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,o])=>({srcStat:i,destStat:o}))}function ei(e,t,r){let n,i=r.dereference?u=>te.statSync(u,{bigint:!0}):u=>te.lstatSync(u,{bigint:!0}),o=i(e);try{n=i(t)}catch(u){if(u.code==="ENOENT")return{srcStat:o,destStat:null};throw u}return{srcStat:o,destStat:n}}function ti(e,t,r,n,i){zn.callbackify(Zn)(e,t,n,(o,u)=>{if(o)return i(o);let{srcStat:c,destStat:f}=u;if(f){if(oe(c,f)){let h=N.basename(e),s=N.basename(t);return r==="move"&&h!==s&&h.toLowerCase()===s.toLowerCase()?i(null,{srcStat:c,destStat:f,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!f.isDirectory())return i(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!c.isDirectory()&&f.isDirectory())return i(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return c.isDirectory()&&Ue(e,t)?i(new Error(ve(e,t,r))):i(null,{srcStat:c,destStat:f})})}function ri(e,t,r,n){let{srcStat:i,destStat:o}=ei(e,t,n);if(o){if(oe(i,o)){let u=N.basename(e),c=N.basename(t);if(r==="move"&&u!==c&&u.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(i.isDirectory()&&Ue(e,t))throw new Error(ve(e,t,r));return{srcStat:i,destStat:o}}function xt(e,t,r,n,i){let o=N.resolve(N.dirname(e)),u=N.resolve(N.dirname(r));if(u===o||u===N.parse(u).root)return i();te.stat(u,{bigint:!0},(c,f)=>c?c.code==="ENOENT"?i():i(c):oe(t,f)?i(new Error(ve(e,r,n))):xt(e,t,u,n,i))}function Ft(e,t,r,n){let i=N.resolve(N.dirname(e)),o=N.resolve(N.dirname(r));if(o===i||o===N.parse(o).root)return;let u;try{u=te.statSync(o,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(oe(t,u))throw new Error(ve(e,r,n));return Ft(e,t,o,n)}function oe(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function Ue(e,t){let r=N.resolve(e).split(N.sep).filter(i=>i),n=N.resolve(t).split(N.sep).filter(i=>i);return r.reduce((i,o,u)=>i&&n[u]===o,!0)}function ve(e,t,r){return`Cannot ${r} '${e}' to a subdirectory of itself, '${t}'.`}Ot.exports={checkPaths:ti,checkPathsSync:ri,checkParentPaths:xt,checkParentPathsSync:Ft,isSrcSubdir:Ue,areIdentical:oe}});var Lt=S((yu,_t)=>{"use strict";var J=j(),ue=require("path"),ni=B().mkdirs,ii=b().pathExists,oi=Be().utimesMillis,ce=z();function ui(e,t,r,n){typeof r=="function"&&!n?(n=r,r={}):typeof r=="function"&&(r={filter:r}),n=n||function(){},r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001"),ce.checkPaths(e,t,"copy",r,(i,o)=>{if(i)return n(i);let{srcStat:u,destStat:c}=o;ce.checkParentPaths(e,u,t,"copy",f=>f?n(f):r.filter?Nt(Dt,c,e,t,r,n):Dt(c,e,t,r,n))})}function Dt(e,t,r,n,i){let o=ue.dirname(r);ii(o,(u,c)=>{if(u)return i(u);if(c)return ke(e,t,r,n,i);ni(o,f=>f?i(f):ke(e,t,r,n,i))})}function Nt(e,t,r,n,i,o){Promise.resolve(i.filter(r,n)).then(u=>u?e(t,r,n,i,o):o(),u=>o(u))}function ci(e,t,r,n,i){return n.filter?Nt(ke,e,t,r,n,i):ke(e,t,r,n,i)}function ke(e,t,r,n,i){(n.dereference?J.stat:J.lstat)(t,(u,c)=>u?i(u):c.isDirectory()?di(c,e,t,r,n,i):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?si(c,e,t,r,n,i):c.isSymbolicLink()?pi(e,t,r,n,i):c.isSocket()?i(new Error(`Cannot copy a socket file: ${t}`)):c.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${t}`)):i(new Error(`Unknown file: ${t}`)))}function si(e,t,r,n,i,o){return t?fi(e,r,n,i,o):Tt(e,r,n,i,o)}function fi(e,t,r,n,i){if(n.overwrite)J.unlink(r,o=>o?i(o):Tt(e,t,r,n,i));else return n.errorOnExist?i(new Error(`'${r}' already exists`)):i()}function Tt(e,t,r,n,i){J.copyFile(t,r,o=>o?i(o):n.preserveTimestamps?ai(e.mode,t,r,i):qe(r,e.mode,i))}function ai(e,t,r,n){return li(e)?yi(r,e,i=>i?n(i):Pt(e,t,r,n)):Pt(e,t,r,n)}function li(e){return(e&128)===0}function yi(e,t,r){return qe(e,t|128,r)}function Pt(e,t,r,n){mi(t,r,i=>i?n(i):qe(r,e,n))}function qe(e,t,r){return J.chmod(e,t,r)}function mi(e,t,r){J.stat(e,(n,i)=>n?r(n):oi(t,i.atime,i.mtime,r))}function di(e,t,r,n,i,o){return t?Ct(r,n,i,o):hi(e.mode,r,n,i,o)}function hi(e,t,r,n,i){J.mkdir(r,o=>{if(o)return i(o);Ct(t,r,n,u=>u?i(u):qe(r,e,i))})}function Ct(e,t,r,n){J.readdir(e,(i,o)=>i?n(i):It(o,e,t,r,n))}function It(e,t,r,n,i){let o=e.pop();return o?Si(e,o,t,r,n,i):i()}function Si(e,t,r,n,i,o){let u=ue.join(r,t),c=ue.join(n,t);ce.checkPaths(u,c,"copy",i,(f,h)=>{if(f)return o(f);let{destStat:s}=h;ci(s,u,c,i,l=>l?o(l):It(e,r,n,i,o))})}function pi(e,t,r,n,i){J.readlink(t,(o,u)=>{if(o)return i(o);if(n.dereference&&(u=ue.resolve(process.cwd(),u)),e)J.readlink(r,(c,f)=>c?c.code==="EINVAL"||c.code==="UNKNOWN"?J.symlink(u,r,i):i(c):(n.dereference&&(f=ue.resolve(process.cwd(),f)),ce.isSrcSubdir(u,f)?i(new Error(`Cannot copy '${u}' to a subdirectory of itself, '${f}'.`)):e.isDirectory()&&ce.isSrcSubdir(f,u)?i(new Error(`Cannot overwrite '${f}' with '${u}'.`)):wi(u,r,i)));else return J.symlink(u,r,i)})}function wi(e,t,r){J.unlink(t,n=>n?r(n):J.symlink(e,t,r))}_t.exports=ui});var Mt=S((mu,Wt)=>{"use strict";var L=j(),se=require("path"),Ei=B().mkdirsSync,vi=Be().utimesMillisSync,fe=z();function ki(e,t,r){typeof r=="function"&&(r={filter:r}),r=r||{},r.clobber="clobber"in r?!!r.clobber:!0,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=fe.checkPathsSync(e,t,"copy",r);return fe.checkParentPathsSync(e,n,t,"copy"),qi(i,e,t,r)}function qi(e,t,r,n){if(n.filter&&!n.filter(t,r))return;let i=se.dirname(r);return L.existsSync(i)||Ei(i),$t(e,t,r,n)}function gi(e,t,r,n){if(!(n.filter&&!n.filter(t,r)))return $t(e,t,r,n)}function $t(e,t,r,n){let o=(n.dereference?L.statSync:L.lstatSync)(t);if(o.isDirectory())return Ti(o,e,t,r,n);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return xi(o,e,t,r,n);if(o.isSymbolicLink())return _i(e,t,r,n);throw o.isSocket()?new Error(`Cannot copy a socket file: ${t}`):o.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${t}`):new Error(`Unknown file: ${t}`)}function xi(e,t,r,n,i){return t?Fi(e,r,n,i):jt(e,r,n,i)}function Fi(e,t,r,n){if(n.overwrite)return L.unlinkSync(r),jt(e,t,r,n);if(n.errorOnExist)throw new Error(`'${r}' already exists`)}function jt(e,t,r,n){return L.copyFileSync(t,r),n.preserveTimestamps&&Oi(e.mode,t,r),Ye(r,e.mode)}function Oi(e,t,r){return Di(e)&&Pi(r,e),Ni(t,r)}function Di(e){return(e&128)===0}function Pi(e,t){return Ye(e,t|128)}function Ye(e,t){return L.chmodSync(e,t)}function Ni(e,t){let r=L.statSync(e);return vi(t,r.atime,r.mtime)}function Ti(e,t,r,n,i){return t?Rt(r,n,i):Ci(e.mode,r,n,i)}function Ci(e,t,r,n){return L.mkdirSync(r),Rt(t,r,n),Ye(r,e)}function Rt(e,t,r){L.readdirSync(e).forEach(n=>Ii(n,e,t,r))}function Ii(e,t,r,n){let i=se.join(t,e),o=se.join(r,e),{destStat:u}=fe.checkPathsSync(i,o,"copy",n);return gi(u,i,o,n)}function _i(e,t,r,n){let i=L.readlinkSync(t);if(n.dereference&&(i=se.resolve(process.cwd(),i)),e){let o;try{o=L.readlinkSync(r)}catch(u){if(u.code==="EINVAL"||u.code==="UNKNOWN")return L.symlinkSync(i,r);throw u}if(n.dereference&&(o=se.resolve(process.cwd(),o)),fe.isSrcSubdir(i,o))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${o}'.`);if(L.statSync(r).isDirectory()&&fe.isSrcSubdir(o,i))throw new Error(`Cannot overwrite '${o}' with '${i}'.`);return Li(i,r)}else return L.symlinkSync(i,r)}function Li(e,t){return L.unlinkSync(t),L.symlinkSync(e,t)}Wt.exports=ki});var ge=S((du,At)=>{"use strict";var $i=M().fromCallback;At.exports={copy:$i(Lt()),copySync:Mt()}});var Xt=S((hu,Vt)=>{"use strict";var Jt=j(),Gt=require("path"),v=require("assert"),ae=process.platform==="win32";function bt(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(r=>{e[r]=e[r]||Jt[r],r=r+"Sync",e[r]=e[r]||Jt[r]}),e.maxBusyTries=e.maxBusyTries||3}function Ge(e,t,r){let n=0;typeof t=="function"&&(r=t,t={}),v(e,"rimraf: missing path"),v.strictEqual(typeof e,"string","rimraf: path should be a string"),v.strictEqual(typeof r,"function","rimraf: callback function required"),v(t,"rimraf: invalid options argument provided"),v.strictEqual(typeof t,"object","rimraf: options should be object"),bt(t),Bt(e,t,function i(o){if(o){if((o.code==="EBUSY"||o.code==="ENOTEMPTY"||o.code==="EPERM")&&n<t.maxBusyTries){n++;let u=n*100;return setTimeout(()=>Bt(e,t,i),u)}o.code==="ENOENT"&&(o=null)}r(o)})}function Bt(e,t,r){v(e),v(t),v(typeof r=="function"),t.lstat(e,(n,i)=>{if(n&&n.code==="ENOENT")return r(null);if(n&&n.code==="EPERM"&&ae)return Ut(e,t,n,r);if(i&&i.isDirectory())return xe(e,t,n,r);t.unlink(e,o=>{if(o){if(o.code==="ENOENT")return r(null);if(o.code==="EPERM")return ae?Ut(e,t,o,r):xe(e,t,o,r);if(o.code==="EISDIR")return xe(e,t,o,r)}return r(o)})})}function Ut(e,t,r,n){v(e),v(t),v(typeof n=="function"),t.chmod(e,438,i=>{i?n(i.code==="ENOENT"?null:r):t.stat(e,(o,u)=>{o?n(o.code==="ENOENT"?null:r):u.isDirectory()?xe(e,t,r,n):t.unlink(e,n)})})}function Yt(e,t,r){let n;v(e),v(t);try{t.chmodSync(e,438)}catch(i){if(i.code==="ENOENT")return;throw r}try{n=t.statSync(e)}catch(i){if(i.code==="ENOENT")return;throw r}n.isDirectory()?Fe(e,t,r):t.unlinkSync(e)}function xe(e,t,r,n){v(e),v(t),v(typeof n=="function"),t.rmdir(e,i=>{i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")?ji(e,t,n):i&&i.code==="ENOTDIR"?n(r):n(i)})}function ji(e,t,r){v(e),v(t),v(typeof r=="function"),t.readdir(e,(n,i)=>{if(n)return r(n);let o=i.length,u;if(o===0)return t.rmdir(e,r);i.forEach(c=>{Ge(Gt.join(e,c),t,f=>{if(!u){if(f)return r(u=f);--o===0&&t.rmdir(e,r)}})})})}function Kt(e,t){let r;t=t||{},bt(t),v(e,"rimraf: missing path"),v.strictEqual(typeof e,"string","rimraf: path should be a string"),v(t,"rimraf: missing options"),v.strictEqual(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(n){if(n.code==="ENOENT")return;n.code==="EPERM"&&ae&&Yt(e,t,n)}try{r&&r.isDirectory()?Fe(e,t,null):t.unlinkSync(e)}catch(n){if(n.code==="ENOENT")return;if(n.code==="EPERM")return ae?Yt(e,t,n):Fe(e,t,n);if(n.code!=="EISDIR")throw n;Fe(e,t,n)}}function Fe(e,t,r){v(e),v(t);try{t.rmdirSync(e)}catch(n){if(n.code==="ENOTDIR")throw r;if(n.code==="ENOTEMPTY"||n.code==="EEXIST"||n.code==="EPERM")Ri(e,t);else if(n.code!=="ENOENT")throw n}}function Ri(e,t){if(v(e),v(t),t.readdirSync(e).forEach(r=>Kt(Gt.join(e,r),t)),ae){let r=Date.now();do try{return t.rmdirSync(e,t)}catch{}while(Date.now()-r<500)}else return t.rmdirSync(e,t)}Vt.exports=Ge;Ge.sync=Kt});var le=S((Su,Qt)=>{"use strict";var Oe=j(),Wi=M().fromCallback,Ht=Xt();function Mi(e,t){if(Oe.rm)return Oe.rm(e,{recursive:!0,force:!0},t);Ht(e,t)}function Ai(e){if(Oe.rmSync)return Oe.rmSync(e,{recursive:!0,force:!0});Ht.sync(e)}Qt.exports={remove:Wi(Mi),removeSync:Ai}});var or=S((pu,ir)=>{"use strict";var Ji=M().fromPromise,er=Q(),tr=require("path"),rr=B(),nr=le(),zt=Ji(async function(t){let r;try{r=await er.readdir(t)}catch{return rr.mkdirs(t)}return Promise.all(r.map(n=>nr.remove(tr.join(t,n))))});function Zt(e){let t;try{t=er.readdirSync(e)}catch{return rr.mkdirsSync(e)}t.forEach(r=>{r=tr.join(e,r),nr.removeSync(r)})}ir.exports={emptyDirSync:Zt,emptydirSync:Zt,emptyDir:zt,emptydir:zt}});var fr=S((wu,sr)=>{"use strict";var Bi=M().fromCallback,ur=require("path"),K=j(),cr=B();function Ui(e,t){function r(){K.writeFile(e,"",n=>{if(n)return t(n);t()})}K.stat(e,(n,i)=>{if(!n&&i.isFile())return t();let o=ur.dirname(e);K.stat(o,(u,c)=>{if(u)return u.code==="ENOENT"?cr.mkdirs(o,f=>{if(f)return t(f);r()}):t(u);c.isDirectory()?r():K.readdir(o,f=>{if(f)return t(f)})})})}function Yi(e){let t;try{t=K.statSync(e)}catch{}if(t&&t.isFile())return;let r=ur.dirname(e);try{K.statSync(r).isDirectory()||K.readdirSync(r)}catch(n){if(n&&n.code==="ENOENT")cr.mkdirsSync(r);else throw n}K.writeFileSync(e,"")}sr.exports={createFile:Bi(Ui),createFileSync:Yi}});var dr=S((Eu,mr)=>{"use strict";var Gi=M().fromCallback,ar=require("path"),V=j(),lr=B(),bi=b().pathExists,{areIdentical:yr}=z();function Ki(e,t,r){function n(i,o){V.link(i,o,u=>{if(u)return r(u);r(null)})}V.lstat(t,(i,o)=>{V.lstat(e,(u,c)=>{if(u)return u.message=u.message.replace("lstat","ensureLink"),r(u);if(o&&yr(c,o))return r(null);let f=ar.dirname(t);bi(f,(h,s)=>{if(h)return r(h);if(s)return n(e,t);lr.mkdirs(f,l=>{if(l)return r(l);n(e,t)})})})})}function Vi(e,t){let r;try{r=V.lstatSync(t)}catch{}try{let o=V.lstatSync(e);if(r&&yr(o,r))return}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}let n=ar.dirname(t);return V.existsSync(n)||lr.mkdirsSync(n),V.linkSync(e,t)}mr.exports={createLink:Gi(Ki),createLinkSync:Vi}});var Sr=S((vu,hr)=>{"use strict";var X=require("path"),ye=j(),Xi=b().pathExists;function Hi(e,t,r){if(X.isAbsolute(e))return ye.lstat(e,n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),r(n)):r(null,{toCwd:e,toDst:e}));{let n=X.dirname(t),i=X.join(n,e);return Xi(i,(o,u)=>o?r(o):u?r(null,{toCwd:i,toDst:e}):ye.lstat(e,c=>c?(c.message=c.message.replace("lstat","ensureSymlink"),r(c)):r(null,{toCwd:e,toDst:X.relative(n,e)})))}}function Qi(e,t){let r;if(X.isAbsolute(e)){if(r=ye.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{let n=X.dirname(t),i=X.join(n,e);if(r=ye.existsSync(i),r)return{toCwd:i,toDst:e};if(r=ye.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:X.relative(n,e)}}}hr.exports={symlinkPaths:Hi,symlinkPathsSync:Qi}});var Er=S((ku,wr)=>{"use strict";var pr=j();function zi(e,t,r){if(r=typeof t=="function"?t:r,t=typeof t=="function"?!1:t,t)return r(null,t);pr.lstat(e,(n,i)=>{if(n)return r(null,"file");t=i&&i.isDirectory()?"dir":"file",r(null,t)})}function Zi(e,t){let r;if(t)return t;try{r=pr.lstatSync(e)}catch{return"file"}return r&&r.isDirectory()?"dir":"file"}wr.exports={symlinkType:zi,symlinkTypeSync:Zi}});var Dr=S((qu,Or)=>{"use strict";var eo=M().fromCallback,kr=require("path"),U=Q(),qr=B(),to=qr.mkdirs,ro=qr.mkdirsSync,gr=Sr(),no=gr.symlinkPaths,io=gr.symlinkPathsSync,xr=Er(),oo=xr.symlinkType,uo=xr.symlinkTypeSync,co=b().pathExists,{areIdentical:Fr}=z();function so(e,t,r,n){n=typeof r=="function"?r:n,r=typeof r=="function"?!1:r,U.lstat(t,(i,o)=>{!i&&o.isSymbolicLink()?Promise.all([U.stat(e),U.stat(t)]).then(([u,c])=>{if(Fr(u,c))return n(null);vr(e,t,r,n)}):vr(e,t,r,n)})}function vr(e,t,r,n){no(e,t,(i,o)=>{if(i)return n(i);e=o.toDst,oo(o.toCwd,r,(u,c)=>{if(u)return n(u);let f=kr.dirname(t);co(f,(h,s)=>{if(h)return n(h);if(s)return U.symlink(e,t,c,n);to(f,l=>{if(l)return n(l);U.symlink(e,t,c,n)})})})})}function fo(e,t,r){let n;try{n=U.lstatSync(t)}catch{}if(n&&n.isSymbolicLink()){let c=U.statSync(e),f=U.statSync(t);if(Fr(c,f))return}let i=io(e,t);e=i.toDst,r=uo(i.toCwd,r);let o=kr.dirname(t);return U.existsSync(o)||ro(o),U.symlinkSync(e,t,r)}Or.exports={createSymlink:eo(so),createSymlinkSync:fo}});var $r=S((gu,Lr)=>{"use strict";var{createFile:Pr,createFileSync:Nr}=fr(),{createLink:Tr,createLinkSync:Cr}=dr(),{createSymlink:Ir,createSymlinkSync:_r}=Dr();Lr.exports={createFile:Pr,createFileSync:Nr,ensureFile:Pr,ensureFileSync:Nr,createLink:Tr,createLinkSync:Cr,ensureLink:Tr,ensureLinkSync:Cr,createSymlink:Ir,createSymlinkSync:_r,ensureSymlink:Ir,ensureSymlinkSync:_r}});var De=S((xu,jr)=>{function ao(e,{EOL:t=`
`,finalEOL:r=!0,replacer:n=null,spaces:i}={}){let o=r?t:"";return JSON.stringify(e,n,i).replace(/\n/g,t)+o}function lo(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}jr.exports={stringify:ao,stripBom:lo}});var Ar=S((Fu,Mr)=>{var re;try{re=j()}catch{re=require("fs")}var Pe=M(),{stringify:Rr,stripBom:Wr}=De();async function yo(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||re,n="throws"in t?t.throws:!0,i=await Pe.fromCallback(r.readFile)(e,t);i=Wr(i);let o;try{o=JSON.parse(i,t?t.reviver:null)}catch(u){if(n)throw u.message=`${e}: ${u.message}`,u;return null}return o}var mo=Pe.fromPromise(yo);function ho(e,t={}){typeof t=="string"&&(t={encoding:t});let r=t.fs||re,n="throws"in t?t.throws:!0;try{let i=r.readFileSync(e,t);return i=Wr(i),JSON.parse(i,t.reviver)}catch(i){if(n)throw i.message=`${e}: ${i.message}`,i;return null}}async function So(e,t,r={}){let n=r.fs||re,i=Rr(t,r);await Pe.fromCallback(n.writeFile)(e,i,r)}var po=Pe.fromPromise(So);function wo(e,t,r={}){let n=r.fs||re,i=Rr(t,r);return n.writeFileSync(e,i,r)}var Eo={readFile:mo,readFileSync:ho,writeFile:po,writeFileSync:wo};Mr.exports=Eo});var Br=S((Ou,Jr)=>{"use strict";var Ne=Ar();Jr.exports={readJson:Ne.readFile,readJsonSync:Ne.readFileSync,writeJson:Ne.writeFile,writeJsonSync:Ne.writeFileSync}});var Te=S((Du,Gr)=>{"use strict";var vo=M().fromCallback,me=j(),Ur=require("path"),Yr=B(),ko=b().pathExists;function qo(e,t,r,n){typeof r=="function"&&(n=r,r="utf8");let i=Ur.dirname(e);ko(i,(o,u)=>{if(o)return n(o);if(u)return me.writeFile(e,t,r,n);Yr.mkdirs(i,c=>{if(c)return n(c);me.writeFile(e,t,r,n)})})}function go(e,...t){let r=Ur.dirname(e);if(me.existsSync(r))return me.writeFileSync(e,...t);Yr.mkdirsSync(r),me.writeFileSync(e,...t)}Gr.exports={outputFile:vo(qo),outputFileSync:go}});var Kr=S((Pu,br)=>{"use strict";var{stringify:xo}=De(),{outputFile:Fo}=Te();async function Oo(e,t,r={}){let n=xo(t,r);await Fo(e,n,r)}br.exports=Oo});var Xr=S((Nu,Vr)=>{"use strict";var{stringify:Do}=De(),{outputFileSync:Po}=Te();function No(e,t,r){let n=Do(t,r);Po(e,n,r)}Vr.exports=No});var Qr=S((Tu,Hr)=>{"use strict";var To=M().fromPromise,R=Br();R.outputJson=To(Kr());R.outputJsonSync=Xr();R.outputJSON=R.outputJson;R.outputJSONSync=R.outputJsonSync;R.writeJSON=R.writeJson;R.writeJSONSync=R.writeJsonSync;R.readJSON=R.readJson;R.readJSONSync=R.readJsonSync;Hr.exports=R});var rn=S((Cu,tn)=>{"use strict";var Co=j(),Ke=require("path"),Io=ge().copy,en=le().remove,_o=B().mkdirp,Lo=b().pathExists,zr=z();function $o(e,t,r,n){typeof r=="function"&&(n=r,r={}),r=r||{};let i=r.overwrite||r.clobber||!1;zr.checkPaths(e,t,"move",r,(o,u)=>{if(o)return n(o);let{srcStat:c,isChangingCase:f=!1}=u;zr.checkParentPaths(e,c,t,"move",h=>{if(h)return n(h);if(jo(t))return Zr(e,t,i,f,n);_o(Ke.dirname(t),s=>s?n(s):Zr(e,t,i,f,n))})})}function jo(e){let t=Ke.dirname(e);return Ke.parse(t).root===t}function Zr(e,t,r,n,i){if(n)return be(e,t,r,i);if(r)return en(t,o=>o?i(o):be(e,t,r,i));Lo(t,(o,u)=>o?i(o):u?i(new Error("dest already exists.")):be(e,t,r,i))}function be(e,t,r,n){Co.rename(e,t,i=>i?i.code!=="EXDEV"?n(i):Ro(e,t,r,n):n())}function Ro(e,t,r,n){Io(e,t,{overwrite:r,errorOnExist:!0},o=>o?n(o):en(e,n))}tn.exports=$o});var sn=S((Iu,cn)=>{"use strict";var on=j(),Xe=require("path"),Wo=ge().copySync,un=le().removeSync,Mo=B().mkdirpSync,nn=z();function Ao(e,t,r){r=r||{};let n=r.overwrite||r.clobber||!1,{srcStat:i,isChangingCase:o=!1}=nn.checkPathsSync(e,t,"move",r);return nn.checkParentPathsSync(e,i,t,"move"),Jo(t)||Mo(Xe.dirname(t)),Bo(e,t,n,o)}function Jo(e){let t=Xe.dirname(e);return Xe.parse(t).root===t}function Bo(e,t,r,n){if(n)return Ve(e,t,r);if(r)return un(t),Ve(e,t,r);if(on.existsSync(t))throw new Error("dest already exists.");return Ve(e,t,r)}function Ve(e,t,r){try{on.renameSync(e,t)}catch(n){if(n.code!=="EXDEV")throw n;return Uo(e,t,r)}}function Uo(e,t,r){return Wo(e,t,{overwrite:r,errorOnExist:!0}),un(e)}cn.exports=Ao});var an=S((_u,fn)=>{"use strict";var Yo=M().fromCallback;fn.exports={move:Yo(rn()),moveSync:sn()}});var He=S((Lu,ln)=>{"use strict";ln.exports={...Q(),...ge(),...or(),...$r(),...Qr(),...B(),...an(),...Te(),...b(),...le()}});var Qo={};In(Qo,{enqueue:()=>Vo,getDb:()=>Xo,startWriters:()=>Ko,workerCount:()=>Ho});module.exports=_n(Qo);var Sn=ie(require("os")),pn=require("worker_threads"),wn=ie(He());var yn=require("child_process"),mn=ie(require("util")),dn=mn.default.promisify(yn.exec);var de=[],En=Sn.cpus(),Ce=En.length,Go=/CREATE TABLE IF NOT EXISTS ([^\s]+) \(/,Ze=[],Qe=0,hn=!1,ze=0;async function bo(e,t,r){return new Promise(n=>{function i(o,u){let c=new pn.Worker(e),f=null;function h(){!f&&de.length&&(ze+=1,f=de.shift(),c.postMessage(f.message))}c.on("online",()=>{Ze.push({takeWork:h,shutdown:()=>c.terminate()}),h()}).on("message",async s=>{if(s===!0){if(ze-=1,de.length===0&&ze===0&&await r()===!0)return n(!0)}else{if(f===null)return;f.resolve(s),f=null,h()}}).on("error",s=>{console.error(s)}),t(c,u)}En.forEach(i)})}var vn=async e=>new Promise((t,r)=>{de.push({resolve:t,reject:r,message:e});let n=0;for(let i of Ze){if(n===Qe){i.takeWork(),Qe=(Qe+1)%Ce;break}n+=1}}),kn=async(e,t,r,n,i=!1)=>((0,wn.ensureDirSync)(e),bo(__dirname+"/../dist/insert.js",(o,u)=>{o.postMessage({type:"connect",path:e+"/"+t+"."+u+".sqlite",transactions:n.toString()||"function (sql) { return sql }"}),o.postMessage({sql:r})},async()=>{if(de.length>0||i===!1||hn)return!1;hn=!0,Ze.forEach(c=>c.shutdown());let o=e+"/"+t+".sqlite",u=[`(rm -f "${o}" && touch "${o}")`];for(let c=0;c<Ce;c++){let f=e+"/"+t+"."+c+".sqlite",h=r.match(Go)[1];u.push(`(sqlite3 "${f}" ".dump ${h}" | sed -e 's/CREATE TABLE ${h} /CREATE TABLE IF NOT EXISTS ${h} /' | sqlite3 "${o}")`),u.push(`(rm -f "${f}" && rm -f "${f}-journal")`)}return await dn(`(${u.join(" && ")})`),!0}));var qn=ie(require("better-sqlite3"));var gn=ie(He()),Ie={},xn=e=>(Ie[e]===void 0&&((0,gn.ensureFileSync)(e),Ie[e]=new qn.default(e),process.on("exit",()=>Ie[e].close()),process.on("SIGHUP",()=>process.exit(129)),process.on("SIGINT",()=>process.exit(130)),process.on("SIGTERM",()=>process.exit(143))),Ie[e]),Fn=async e=>vn({type:"collection",data:e});var Ko=kn,Vo=Fn,Xo=xn,Ho=Ce;0&&(module.exports={enqueue,getDb,startWriters,workerCount});
